<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Data Usada Bali</title>

  <!-- Bootstrap -->
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV+R+8FH2DjFQNE+1R7F7h6U6fJ6Y5kgRUkWH/0tW7Hg1MWh9hz"
    crossorigin="anonymous"
  />

  <style>
    body { background-color: #f8f9fa; }
    .table img { max-width: 100px; height: auto; }
  </style>
</head>
<body>
  <div class="container my-5">
    <h1 class="text-center mb-4">Daftar Obat Tradisional Bali</h1>
    <div class="table-responsive">
      <table id="data-table" class="table table-striped table-bordered">
        <thead></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Papa Parse untuk membaca CSV -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      Papa.parse('dataset_usada_bali.csv', {
        download: true,
        header: true,
        skipEmptyLines: true,
        complete: ({ data }) => {
          const table = document.getElementById('data-table');
          if (!data.length) {
            table.tBodies[0].innerHTML = '<tr><td colspan="100%">Tidak ada data.</td></tr>';
            return;
          }

          // Generate header
          const headers = Object.keys(data[0]).map(h => h.trim());
          const thead = table.createTHead();
          const trHead = thead.insertRow();
          headers.forEach(text => {
            const th = document.createElement('th');
            th.textContent = text;
            trHead.appendChild(th);
          });

          // Generate body
          const tbody = table.createTBody();
          data.forEach(row => {
            const tr = tbody.insertRow();
            headers.forEach(header => {
              const cell = tr.insertCell();
              const val = row[header] || '';

              if (/gambar/i.test(header) && val) {
                const img = document.createElement('img');
                img.src = val;
                img.alt = header;
                cell.appendChild(img);
              }
              else if (/referensi\s*gambar/i.test(header) && val) {
                const a = document.createElement('a');
                a.href = val;
                a.target = '_blank';
                a.textContent = 'Link';
                cell.appendChild(a);
              }
              else {
                cell.textContent = val;
              }
            });
          });
        },
        error: err => console.error('Error loading CSV:', err)
      });
    });
  </script>
</body>
</html>
